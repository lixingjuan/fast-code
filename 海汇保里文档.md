# 地址类

1. [保理部门封装UI-DEMO地址](https://candy-ui.github.io/candy/)
3. [线上地址](https://crrcgc.hscf.com/) -- 账号/密码：moji/handhand
4. [SVN](https://pms.hscf.com/svn/SCFPUB/项目管理/20200225海汇保理项目/")



# ccu-web 项目安装步骤

```bash
# 进入uipublic目录
cd uipublic

# 初始化仓库
git submodule init && git submodule update

# 回到根目录，安装依赖
yarn

# 启动项目(使用i脚本)
yarn local
```

# 嗯 ？？这个是干啥来着？

```bash
npx analysis mp
```


# 账号密码

1. 项目登陆
    1. moji/handhand 保理商&平台管理员
    2. shyh/handhand 供应商
    3. dya/handhand 核心企业
    4. 9764/handhand

2. postman账号密码：
    developer@hscf.com/handhand
    
3. svn账号密码 

 




 

# 项目TODO
1. [x]  scf-web/invention 企业邀请
2. [x]  scf-web/user-check/create.md.vue  用户审核的新增
3. [ ]  afwk-web/src/page/main_$parent/customer-manage 用户注册，新增
4. [ ]  ccu-web/project/matters  特批事项, 保存有毛病，报错500
5. [ ]  ccu-web/src/page/main_$tp/project/quota   => 额度激活
6. [x]  贷中核销模块  应为ccu-web 暂存 rms-web/verification  => 点仅页面，无接口
   1. [x]  核销配置已经对接好了，未测试
7. [x]  贷中结算模块  应为ccu-web 暂存 rms-web/settlement => 点仅页面，无接口
8. [x]  /scf-web/src/page/main_$parent/data-bank 供应商，
   1. [x]  准入/授信 => 点击查看的弹窗数据渲染和点击文件名称下载文件
9.  [x]  /rms-web/src/page/main_$tp/data-bank 资料管理，
   2. [x]  准入/授信资料 => 点击查看的弹窗数据渲染和点击文件名称下载文件
   3. [x]  应收帐款登记 => 点击编辑，弹窗 附件字段
   4. [x]  应收帐款登记 => 点击新增，弹窗 附件字段
10. [ ]  回款模块 => 页面已好，等融资申请数据，暂无法测试；
11. [ ]  保理商 提交融资申请




 






 



# 常用

## 获取用户信息

this.form.orgId = this.getUserInfo_().orgId;
this.form.orgName = this.getUserInfo_().organizationName;


## 常用接口

```js
import { mstUtilsApi } from 'pubapi@';

const res = await mstUtilsApi.vendorOrgsKV();


```

## 请求快码
 
```js
import { afwkUtilsApi, mstUtilsApi } from 'pubapi@'

async getLookupValues (code, target) {
  const lookupCodeArr = [
    {
      code: 'REALITY_LOAN',
      target: 'specialTypesList'
    }
  ]
  lookupCodeArr.forEach(item => this.loadLookup(item))

  // 获取客户名称快码
  try {
    this.requestOrgNameList = (await mstUtilsApi.certVendorOrgs()) || []
  } catch (error) {
    window.console.log(error)
  }
},

async loadLookup ({ code, target }) {
  console.log('cece', await afwkUtilsApi.getLookupValues(code))
  this[target] = (await afwkUtilsApi.getLookupValues(code)) || []
}
```
 

## 问题清单

1. [ ] 这几个项目怎么整合到一起，打了包之后？
2. [ ] 


```js
import { hCloudApi } from '../fetch.js'
import { queryUtilsApi } from 'pubapi@'
let api = {}


/* 有参数get请求 */

/**
 * 接口名称
 * @url /fund/v1/glSubjects/all
 * @method GET
 * @permission FundGlSubject.findAll
 * @visibility private
 * @see 文档地址
 */
api.queryList = query => {
  return queryUtilsApi.queryData(
    hCloudApi,
    `/fund/v1/settleWriteOff/waitWriteOff?`,
    query // 对象，将分页参数放进来
  )
}

/* post\put请求 */

/**
 * 接口名称
 * @url /fund/v1/glSubjects/all
 * @method GET
 * @permission FundGlSubject.findAll
 * @visibility private
 * @see 文档地址
 */
api.postData = params => {
  return queryUtilsApi.requestData(hCloudApi, 'post', `/fund/v1/glSubjects`, params)
}

export default api

```

 

 


```js
import { CdPage, CdPanel, CdText } from 'comp@'
import { CdText } from 'comp@'
import { CdPanel, CdBorderTitle } from 'comp@'

import CdTextDate from '@candy/ui/component/cd-text-date'
import CdTextMoney from '@candy/ui/component/cd-text-money'
import CdInputMoney from '@candy/ui/component/cd-input-money'


// 表单追加金额合计
<el-table
  :data="modelData"
+ :summary-method="getSummaries"
  style="width: 90%; margin:10px auto;"
  :show-summary="true"
  sum-text="本次合计"
  v-loading="isLoading"
/>

getSummaries (param) {
  const { columns, data } = param
  const sums = []
  columns.forEach((column, index) => {
    if (index === 0) {
      sums[index] = '合计金额'
      return
    }
    const values = data.map(item => Number(item[column.property]))
    if (!values.every(value => isNaN(value))) {
      sums[index] = values.reduce((prev, curr) => {
        const value = Number(curr)
        if (!isNaN(value)) {
          return prev + curr
        } else {
          return prev
        }
      }, 0)
      sums[index] = u.number.toThousands(sums[index] || 0)
    }
  }
  return sums
}
```
```js
    <cd-border-title title="资产清单" style="margin: 40px 0 10px">
      <template v-slot:s-title>
        <el-tooltip
          class="item"
          effect="dark"
          content="含固定资产、大额投资股权、商票等"
          placement="top"
        >
          <el-button icon="el-icon-question" type="text" />
        </el-tooltip>
      </template>
    </cd-border-title>
```

 




